{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport LatestNews from '../components/LatestNews';\nimport HomeNews from '../components/HomeNews';\nimport AdminPanel from '../components/AdminPanel';\nimport InbetweenOne from '../components/InbetweenOne';\nimport Newsletter from '../components/Newsletter';\nimport { useKeenSlider } from 'keen-slider/react';\nimport { useState, useEffect } from 'react';\n\nvar fetcher = function fetcher(url) {\n  return fetch(url).then(function (res) {\n    return res.json();\n  });\n};\n\nvar Index = function Index(props) {\n  var _useState = useState([]),\n      homeData = _useState[0],\n      setHomeData = _useState[1]; // data to which I add more n more elements\n\n\n  var _useState2 = useState([]),\n      btnChangedData = _useState2[0],\n      setBtnChangedData = _useState2[1]; // based on btn type set new data from homeData\n\n\n  var _useState3 = useState(''),\n      currentBtnClicked = _useState3[0],\n      setCurrentBtnClicked = _useState3[1]; // type of btn\n\n\n  var _useState4 = useState(8),\n      currentPage = _useState4[0],\n      setCurrentPage = _useState4[1]; // current page number\n\n\n  var _useState5 = useState(true),\n      mainPage = _useState5[0],\n      setMainPage = _useState5[1]; // based on value I disappear top navbar line elements (left)\n  // slider configuration ***\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      pause = _React$useState2[0],\n      setPause = _React$useState2[1];\n\n  var timer = React.useRef();\n\n  var _useKeenSlider = useKeenSlider({\n    loop: true,\n    duration: 2000,\n    dragStart: function dragStart() {\n      setPause(true);\n    },\n    dragEnd: function dragEnd() {\n      setPause(false);\n    }\n  }),\n      _useKeenSlider2 = _slicedToArray(_useKeenSlider, 2),\n      sliderRef = _useKeenSlider2[0],\n      slider = _useKeenSlider2[1];\n\n  React.useEffect(function () {\n    sliderRef.current.addEventListener('mouseover', function () {\n      setPause(true);\n    });\n    sliderRef.current.addEventListener('mouseout', function () {\n      setPause(false);\n    });\n  }, [sliderRef]);\n  React.useEffect(function () {\n    timer.current = setInterval(function () {\n      if (!pause && slider) {\n        slider.next();\n      }\n    }, 3500);\n    return function () {\n      clearInterval(timer.current);\n    };\n  }, [pause, slider]); // end of slider configuration ***\n\n  useEffect(function () {\n    setHomeData(props.homeNewsData);\n  }, []);\n\n  var latest = function latest() {\n    var oldData = _toConsumableArray(homeData);\n\n    var time = new Date(Date.now() - 86400000 * 5).toISOString();\n    var newData = oldData.filter(function (el) {\n      return el.createdAt > time;\n    });\n    setBtnChangedData(newData);\n    setCurrentBtnClicked('latest');\n  };\n\n  var popular = function popular() {\n    var oldData = _toConsumableArray(homeData);\n\n    var newData = oldData.filter(function (el) {\n      return el.popularity >= 2;\n    });\n    setBtnChangedData(newData);\n    setCurrentBtnClicked('popular');\n  };\n\n  var under = function under() {\n    var oldData = _toConsumableArray(homeData);\n\n    var newData = oldData.filter(function (el) {\n      return el.price <= 10;\n    });\n    setBtnChangedData(newData);\n    setCurrentBtnClicked('under');\n  };\n\n  var random = function random() {\n    var oldData = _toConsumableArray(homeData);\n\n    function shuffle(array) {\n      var currentIndex = array.length,\n          temporaryValue,\n          randomIndex; // While there remain elements to shuffle...\n\n      while (0 !== currentIndex) {\n        // Pick a remaining element...\n        randomIndex = Math.floor(Math.random() * currentIndex);\n        currentIndex -= 1; // And swap it with the current element.\n\n        temporaryValue = array[currentIndex];\n        array[currentIndex] = array[randomIndex];\n        array[randomIndex] = temporaryValue;\n      }\n\n      return array;\n    }\n\n    var newData = shuffle(oldData);\n    setBtnChangedData(newData);\n    setCurrentBtnClicked('random');\n  };\n\n  var more = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var result, _yield$result$json, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"http://localhost:3000/api/items/\".concat(currentPage));\n\n            case 2:\n              result = _context.sent;\n              _context.next = 5;\n              return result.json();\n\n            case 5:\n              _yield$result$json = _context.sent;\n              data = _yield$result$json.data;\n              setCurrentPage(function (p) {\n                return p + 4;\n              });\n              setHomeData(data); // Add to homeData\n\n              if (currentBtnClicked === 'latest') latest();\n              if (currentBtnClicked === 'popular') popular();\n              if (currentBtnClicked === 'under') under();\n              if (currentBtnClicked === 'random') random();\n              setBtnChangedData([]); // Reset and come back to homeData\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function more() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, {\n    mainPage: mainPage,\n    setMainPage: setMainPage\n  }, __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'container'\n  }, __jsx(\"div\", {\n    ref: sliderRef,\n    className: \"jsx-931979104\" + \" \" + 'keen-slider'\n  }, __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'keen-slider__slide number-slide1 slider-configuration'\n  }, __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-box'\n  }, __jsx(\"img\", {\n    src: \"./slider/1.jpg\",\n    className: \"jsx-931979104\"\n  }), __jsx(\"p\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-text slider-text-1'\n  }, \"PONAD 100 SKLEPOW\"))), __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'keen-slider__slide number-slide2 slider-configuration'\n  }, __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-box'\n  }, __jsx(\"img\", {\n    src: \"./slider/2.jpg\",\n    className: \"jsx-931979104\"\n  }), __jsx(\"p\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-text slider-text-2'\n  }, \"ZAWSZE POD REKA\"))), __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'keen-slider__slide number-slide3 slider-configuration'\n  }, __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-box'\n  }, __jsx(\"img\", {\n    src: \"./slider/1.jpg\",\n    className: \"jsx-931979104\"\n  }), __jsx(\"p\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-text slider-text-3'\n  }, \"NA KAZDA OKAZJE\"))), __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'keen-slider__slide number-slide4 slider-configuration'\n  }, __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-box'\n  }, __jsx(\"img\", {\n    src: \"./slider/4.jpg\",\n    className: \"jsx-931979104\"\n  }), __jsx(\"p\", {\n    className: \"jsx-931979104\" + \" \" + 'slider-text slider-text-4'\n  }, \"WASZE CENTRUM\")))), __jsx(LatestNews, {\n    data: props.latestNewsData,\n    latest: latest\n  }), __jsx(Newsletter, null), __jsx(HomeNews, {\n    data: btnChangedData.length === 0 ? homeData : btnChangedData,\n    latest: latest,\n    popular: popular,\n    under: under,\n    random: random\n  })), __jsx(\"div\", {\n    className: \"jsx-931979104\" + \" \" + 'moreBtnDiv'\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return more();\n    },\n    className: \"jsx-931979104\" + \" \" + 'btn'\n  }, \"WIECEJ\")), __jsx(_JSXStyle, {\n    id: \"931979104\"\n  }, [\".slider-configuration.jsx-931979104{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:2rem 0;}\", \".slider-box.jsx-931979104{position:relative;}\", \".slider-text.jsx-931979104{position:absolute;font-size:3rem;width:34rem;line-height:3rem;text-shadow:1px 1px 0px rgba(0,0,0,0.2);padding:1rem 2rem;background-color:#ffc500;color:#fff;}\", \".slider-text-1.jsx-931979104{bottom:30rem;left:-5rem;white-space:nowrap;}\", \".slider-text-2.jsx-931979104{bottom:29rem;right:-1rem;}\", \".slider-text-3.jsx-931979104{bottom:3rem;left:-10rem;}\", \".slider-text-4.jsx-931979104{bottom:2rem;right:-3rem;}\", \".star.jsx-931979104{position:absolute;top:-54px;left:-57px;width:9%;-webkit-transform:rotate(-3deg);-ms-transform:rotate(-3deg);transform:rotate(-3deg);}\", \".moreBtnDiv.jsx-931979104{text-align:center;margin:3rem 0;}\", \".moreBtnDiv.jsx-931979104 button.jsx-931979104{padding:1rem 3rem;border:none;outline:none;}\", \".moreBtnDiv.jsx-931979104 button.jsx-931979104:hover{background-color:#ff2a2a;color:#fff;}\", \".moreBtnDiv.jsx-931979104 button.jsx-931979104:active{-webkit-transform:translateY(0.3rem);-ms-transform:translateY(0.3rem);transform:translateY(0.3rem);}\", \"@media only screen and (max-width:1024px){.slider-text-1.jsx-931979104{left:-1rem;}.slider-text-2.jsx-931979104{right:-3rem;}.slider-text-3.jsx-931979104{left:-1rem;}}\", \"@media only screen and (max-width:768px){.slider-box.jsx-931979104{position:relative;width:95%;margin:0 auto;}.slider-box.jsx-931979104 img.jsx-931979104{width:100%;}.slider-box.jsx-931979104 p.jsx-931979104{font-size:1.8rem;width:100%;padding:0.4rem 0;text-align:center;bottom:0;left:0;}}\", \"@media only screen and (max-width:510px){.slider-box.jsx-931979104 p.jsx-931979104{font-size:1.3rem;padding:.2rem 0;line-height:inherit;}}\"]));\n};\n\nexport var __N_SSG = true;\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}